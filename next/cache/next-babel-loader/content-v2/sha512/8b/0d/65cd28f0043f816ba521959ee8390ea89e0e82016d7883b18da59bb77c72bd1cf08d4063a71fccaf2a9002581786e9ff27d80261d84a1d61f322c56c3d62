{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/pages/checkout/[categoria]/[duracion].js\";\n\n/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : CheckoutBuy\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\nimport React, { Component } from \"react\"; // nodejs library that concatenates classes\n\nimport classnames from \"classnames\";\nimport * as $ from 'jquery'; //Componente Boton de pago paypal\n\nimport TransbankCheck from \"../../../src/components/checkoutBuy/Transbank/TransbankCheck\";\nimport * as functions from '../../../src/components/shared/functions';\nimport environment from '../../../src/environments/environments'; // reactstrap components\n\nimport { Card, CardBody, Form, Button, Input, InputGroupAddon, InputGroup, Media, Container, Row, Table, Col } from \"reactstrap\";\nimport { withRouter, NextRouter } from 'next/router';\n/*!=======================================================\n  * Nombre: Shopping\n  * Descripción: Carga la informacion del carrito de compras\n  =========================================================*/\n\nclass Checkout extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"API_URI\", environment.apiUrlAws);\n\n    _defineProperty(this, \"setDatosContacto\", (d, e) => {\n      switch (d) {\n        case \"nombre\":\n          this.setState({\n            nombre: e.target.value\n          });\n          break;\n\n        case \"email\":\n          this.setState({\n            email: e.target.value\n          });\n          break;\n      }\n    });\n\n    _defineProperty(this, \"FinalizarCompra\", (props, e) => {\n      let emailRegex = /^[-\\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\\.){1,125}[A-Z]{2,63}$/i;\n\n      if (this.state.nombre == \"\" || this.state.email == \"\") {\n        $(\".alert-danger.cn\").css(\"display\", \"block\");\n        this.setState({\n          mensajeError: \"Debe proporcionar un nombre y un email de contacto.\"\n        });\n        return false;\n      }\n\n      if (emailRegex.test(this.state.email) == false) {\n        $(\".alert-danger.cn\").css(\"display\", \"block\");\n        this.setState({\n          mensajeError: \"Email inválido.\"\n        });\n        return false;\n      }\n\n      let contact = {};\n      contact['nombre'] = this.state.nombre;\n      contact['email'] = this.state.email;\n      localStorage.setItem('contact', JSON.stringify(contact));\n      this.setState({\n        mensajeError: \"\"\n      });\n      let cat = this.state.categoria;\n      let duracion = this.state.duracion;\n      let method = this.state.method;\n      let prop = this.props;\n\n      if (this.state.method == \"transbank\") {\n        //Array data Create orden\n        let arr = {};\n        this.state.products.forEach(data => {\n          arr['email'] = this.state.email;\n          arr['nombre'] = this.state.nombre;\n          arr['descuento'] = this.state.descuento;\n          arr['total'] = this.state.total;\n          arr['cupon'] = this.state.cupon;\n          arr['productos'] = [{\n            \"duracion\": this.state.duracion,\n            \"currency\": data.currency,\n            \"categoria\": functions.capitalizarPrimeraLetra(cat),\n            \"cantidad\": 1\n          }];\n        }); //Crear orden de pago transbank\n\n        return fetch(`${this.API_URI}/checkout/order/tbk`, {\n          method: 'POST',\n          body: JSON.stringify(arr),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(function (res) {\n          //console.log('res:', res);\n          return res.json();\n        }).then(function (data) {\n          if (data.statusCode == \"200\") {\n            console.log('###200###');\n            global.orden = data.body;\n            global.method = method;\n            prop.router.push({\n              pathname: `/payment/order/${cat}/${duracion}/`\n            });\n          }\n        }).catch(err => console.log('#Error#', err));\n      }\n\n      if (this.state.method == \"paypal\") {\n        global.method = method;\n        prop.router.push({\n          pathname: `/payment/order/${cat}/${duracion}/`\n        });\n      }\n    });\n\n    this.state = {\n      products: [],\n      detail: [],\n      dataphone: [],\n      exchanges: \"\",\n      categoria: \"\",\n      duracion: \"\",\n      paymentTabs: 1,\n      discountFocus: undefined,\n      precio: 0,\n      subTotal: 0,\n      descuento: \"0\",\n      total: 0,\n      method: \"\",\n      email: \"\",\n      nombre: \"\",\n      cupon: \"\",\n      mensajeError: \"\"\n    };\n    this.getProductsLS = this.getProductsLS.bind(this, props);\n  }\n\n  static getInitialProps({\n    query: {\n      categoria,\n      duracion\n    }\n  }) {\n    return {\n      categoria: categoria,\n      duracion: duracion\n    };\n  }\n  /*!=======================================================\n  * Nombre:  getProductsLS\n  * Descripción: \n  =========================================================*/\n\n\n  getProductsLS(props) {\n    this.setState({\n      categoria: props.categoria,\n      duracion: props.duracion\n    });\n    const products = localStorage.getItem('table');\n    const detail = JSON.parse(localStorage.getItem('detail'));\n    this.setState({\n      products: JSON.parse(products),\n      detail: detail,\n      subTotal: detail.amt,\n      total: detail.amt,\n      precio: detail.amt,\n      method: detail.method\n    }); //console.log('STATE getProductsLS:', this.state);\n  }\n  /*!=======================================================\n   * Nombre: componentDidMount\n   * Descripción: \n   =========================================================*/\n\n\n  componentDidMount() {\n    this.getProductsLS();\n  }\n  /*!=======================================================\n   * Nombre: setDatosContacto\n   * Descripción: \n   =========================================================*/\n\n\n  render() {\n    let dataTable = [];\n    let cpagoFinalizarCompra = [];\n    let estado = this.state;\n    let detail = {};\n    this.state.products.map((data, i) => {\n      for (let dia in data.price) {\n        if (dia !== this.state.categoria) continue;\n        detail = data.price[dia];\n      }\n\n      const applyDiscount = e => {//console.log('applyDiscount e', e);\n      };\n\n      cpagoFinalizarCompra.push( /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardBody, {\n          children: [/*#__PURE__*/_jsxDEV(Form, {\n            className: \"code-validate\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Descuento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n              className: classnames({\n                \"input-group-focus\": this.state.discountFocus\n              }),\n              children: [/*#__PURE__*/_jsxDEV(Input, {\n                className: \"fc-val\",\n                \"aria-label\": \"Discount\",\n                name: \"name\",\n                placeholder: \"codigo descuento\",\n                type: \"text\" // onFocus={(e) => setDiscountFocus(true)}\n                //onBlur={(e) =>  setDiscountFocus(false)}\n\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(InputGroupAddon, {\n                addonType: \"append\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: e => applyDiscount(e),\n                  className: \"btn-grad\",\n                  color: \"primary\",\n                  type: \"button\",\n                  children: \"Aplicar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"line-info mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Media, {\n            className: \"align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"h6 text-secondary mr-3\",\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Media, {\n              body: true,\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"color-mssr\",\n                children: [data.currency, \" \", estado.subTotal]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Media, {\n            className: \"align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"h6 text-secondary mr-3\",\n              children: \"Descuento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Media, {\n              body: true,\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"color-mssr\",\n                children: [estado.descuento, \" %\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"line-info mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Media, {\n            className: \"align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"h6\",\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Media, {\n              body: true,\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-weight-semi-bold color-mssr\",\n                children: [data.currency, \" \", estado.total]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"line-info mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mb-1\",\n            children: \"Datos de contacto:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            className: \"form \",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: \"\",\n                placeholder: \"Nombre\",\n                type: \"text\",\n                onBlur: e => this.setDatosContacto('nombre', e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"email\",\n                onBlur: e => this.setDatosContacto('email', e),\n                className: \"form-control\",\n                id: \"exampleInputEmail1\",\n                \"aria-describedby\": \"emailHelp\",\n                placeholder: \"Enter email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-danger\",\n              children: this.state.mensajeError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: e => this.FinalizarCompra(this.props, e),\n            className: \"mr-0 btn-grad w-100\",\n            color: \"primary\",\n            children: \"Finalizar compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this));\n      let img_cat = estado.categoria.toLowerCase();\n      dataTable.push( /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-name fc-val\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"fc-val\",\n              children: [\"Categoria \", data.product]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"mr-auto img-container\",\n              children: [this.state.duracion, \"ia/s\", /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"w-50\",\n                alt: \"...\",\n                src: `/assets/img/planes/cat_${img_cat}.png`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-number\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: data.currency\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this), estado.precio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-number\",\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-number\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: data.currency\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this), estado.precio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-total\",\n            children: \"Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-price\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: [data.currency, \"/ \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 29\n            }, this), estado.precio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this));\n    });\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout-page\",\n        id: \"checkout\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section\",\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                lg: \"8\",\n                children: /*#__PURE__*/_jsxDEV(Form, {\n                  className: \"js-validate\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"title mb-0\",\n                    children: \"Resumen de pedido\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"cd-section\",\n                    id: \"contentAreas\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      id: \"tables\",\n                      children: /*#__PURE__*/_jsxDEV(Row, {\n                        children: /*#__PURE__*/_jsxDEV(Col, {\n                          md: \"12\",\n                          children: /*#__PURE__*/_jsxDEV(Card, {\n                            className: \"card-plain mb-0\",\n                            children: /*#__PURE__*/_jsxDEV(CardBody, {\n                              children: /*#__PURE__*/_jsxDEV(Table, {\n                                className: \"tablesorter table-shopping\",\n                                responsive: true,\n                                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                      children: \"Producto\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 331,\n                                      columnNumber: 77\n                                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                      className: \"text-right\",\n                                      children: \"Precio\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 332,\n                                      columnNumber: 77\n                                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                      className: \"text-right\",\n                                      children: \"Qty\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 333,\n                                      columnNumber: 77\n                                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                      className: \"text-right\",\n                                      children: \"Monto\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 334,\n                                      columnNumber: 77\n                                    }, this)]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 330,\n                                    columnNumber: 73\n                                  }, this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 329,\n                                  columnNumber: 69\n                                }, this), dataTable]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 328,\n                                columnNumber: 65\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 327,\n                              columnNumber: 61\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 326,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 325,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 324,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                lg: \"4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"title\",\n                  children: \"Pagar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 37\n                }, this), cpagoFinalizarCompra]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this)\n        }, 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default _c = withRouter(Checkout);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/pages/checkout/[categoria]/[duracion].js"],"names":["React","Component","classnames","$","TransbankCheck","functions","environment","Card","CardBody","Form","Button","Input","InputGroupAddon","InputGroup","Media","Container","Row","Table","Col","withRouter","NextRouter","Checkout","constructor","props","apiUrlAws","d","e","setState","nombre","target","value","email","emailRegex","state","css","mensajeError","test","contact","localStorage","setItem","JSON","stringify","cat","categoria","duracion","method","prop","arr","products","forEach","data","descuento","total","cupon","currency","capitalizarPrimeraLetra","fetch","API_URI","body","headers","then","res","json","statusCode","console","log","global","orden","router","push","pathname","catch","err","detail","dataphone","exchanges","paymentTabs","discountFocus","undefined","precio","subTotal","getProductsLS","bind","getInitialProps","query","getItem","parse","amt","componentDidMount","render","dataTable","cpagoFinalizarCompra","estado","map","i","dia","price","applyDiscount","setDatosContacto","FinalizarCompra","img_cat","toLowerCase","product"],"mappings":"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","sourcesContent":["/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : CheckoutBuy\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\n\nimport React, { Component } from \"react\";\n// nodejs library that concatenates classes\nimport classnames from \"classnames\";\nimport * as $ from 'jquery';\n//Componente Boton de pago paypal\nimport TransbankCheck from \"../../../src/components/checkoutBuy/Transbank/TransbankCheck\";\nimport * as functions from '../../../src/components/shared/functions';\nimport environment from '../../../src/environments/environments';\n// reactstrap components\nimport {\n    Card,\n    CardBody,\n    Form,\n    Button,\n    Input,\n    InputGroupAddon,\n    InputGroup,\n    Media,\n    Container,\n    Row,\n    Table,\n    Col,\n} from \"reactstrap\";\n\nimport { withRouter, NextRouter } from 'next/router'\n\n/*!=======================================================\n  * Nombre: Shopping\n  * Descripción: Carga la informacion del carrito de compras\n  =========================================================*/\nclass Checkout extends Component{\n    API_URI = environment.apiUrlAws;\n   \n    constructor(props) {\n        super(props);\n        this.state = {\n            products: [],\n            detail: [],\n            dataphone: [],\n            exchanges: \"\",\n            categoria: \"\",\n            duracion: \"\",\n            paymentTabs: 1,\n            discountFocus: undefined,\n            precio: 0,\n            subTotal: 0,\n            descuento: \"0\",\n            total: 0,\n            method: \"\",\n            email: \"\",\n            nombre: \"\",\n            cupon: \"\",\n            mensajeError: \"\",\n        }\n        this.getProductsLS = this.getProductsLS.bind(this, props);\n    }\n\n    static getInitialProps({ query: { categoria, duracion } }) {\n        return { categoria: categoria, duracion: duracion }\n    }\n\n\n    /*!=======================================================\n    * Nombre:  getProductsLS\n    * Descripción: \n    =========================================================*/\n    getProductsLS(props) {\n        this.setState({ categoria: props.categoria, duracion: props.duracion });\n        const products = localStorage.getItem('table');\n        const detail = JSON.parse(localStorage.getItem('detail'));\n        this.setState({\n            products: JSON.parse(products),\n            detail: detail,\n            subTotal: detail.amt,\n            total: detail.amt,\n            precio: detail.amt,\n            method: detail.method\n        });\n        //console.log('STATE getProductsLS:', this.state);\n    }\n\n    /*!=======================================================\n     * Nombre: componentDidMount\n     * Descripción: \n     =========================================================*/\n    componentDidMount() {\n        this.getProductsLS();\n    }\n\n    /*!=======================================================\n     * Nombre: setDatosContacto\n     * Descripción: \n     =========================================================*/\n    setDatosContacto = (d, e) => {\n        switch (d) {\n            case \"nombre\":\n                this.setState({ nombre: e.target.value });\n                break;\n            case \"email\":\n                this.setState({ email: e.target.value });\n                break;\n        }\n    }\n\n    /*!=======================================================\n      * Nombre: FinalizarCompra\n      * Descripción: \n      =========================================================*/\n    FinalizarCompra = (props, e) => {\n        let emailRegex = /^[-\\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\\.){1,125}[A-Z]{2,63}$/i;\n        if (this.state.nombre == \"\" || this.state.email == \"\") {\n            $(\".alert-danger.cn\").css(\"display\", \"block\");\n            this.setState({ mensajeError: \"Debe proporcionar un nombre y un email de contacto.\" });\n            return false;\n        }\n        if (emailRegex.test(this.state.email) == false) {\n            $(\".alert-danger.cn\").css(\"display\", \"block\");\n            this.setState({ mensajeError: \"Email inválido.\" });\n            return false;\n        }\n        let contact = {};\n        contact['nombre'] = this.state.nombre;\n        contact['email'] = this.state.email;\n        localStorage.setItem('contact', JSON.stringify(contact));\n\n        this.setState({ mensajeError: \"\" });\n        let cat = this.state.categoria;\n        let duracion = this.state.duracion;\n        let method = this.state.method;\n        let prop = this.props;\n        if (this.state.method == \"transbank\") {\n            //Array data Create orden\n            let arr = {};\n            this.state.products.forEach(data => {\n                arr['email'] = this.state.email;\n                arr['nombre'] = this.state.nombre;\n                arr['descuento'] = this.state.descuento;\n                arr['total'] = this.state.total;\n                arr['cupon'] = this.state.cupon;\n                arr['productos'] = [{\n                    \"duracion\": this.state.duracion,\n                    \"currency\": data.currency,\n                    \"categoria\": functions.capitalizarPrimeraLetra(cat),\n                    \"cantidad\": 1\n                }]\n            });\n            //Crear orden de pago transbank\n            return fetch(`${this.API_URI}/checkout/order/tbk`, {\n                method: 'POST',\n                body: JSON.stringify(arr),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                }\n            }).then(function (res) {\n                //console.log('res:', res);\n                return res.json();\n            }).then(function (data) {\n                if (data.statusCode == \"200\") {\n                    console.log('###200###')\n                    global.orden = data.body;\n                    global.method = method;\n                    prop.router.push({ pathname: `/payment/order/${cat}/${duracion}/`});\n                }\n            }).catch(err => console.log('#Error#', err))\n        }\n        if (this.state.method == \"paypal\") {\n            global.method = method;\n            prop.router.push({ pathname: `/payment/order/${cat}/${duracion}/`});\n        }\n    }\n\n    render() {\n        let dataTable = [];\n        let cpagoFinalizarCompra = [];\n        let estado = this.state;\n        let detail = {};\n        this.state.products.map((data, i) => {\n            for (let dia in data.price) {\n                if (dia !== this.state.categoria) continue;\n                detail = data.price[dia];\n            }\n            const applyDiscount = (e) => {\n                //console.log('applyDiscount e', e);\n            }\n\n            cpagoFinalizarCompra.push(\n                <Card key={i}>\n                    <CardBody>\n                        <Form className=\"code-validate\">\n                            <label>Descuento</label>\n                            <InputGroup\n                                className={classnames({\n                                    \"input-group-focus\": this.state.discountFocus,\n                                })}\n                            >\n                                <Input\n                                    className=\"fc-val\"\n                                    aria-label=\"Discount\"\n                                    name=\"name\"\n                                    placeholder=\"codigo descuento\"\n                                    type=\"text\"\n                                // onFocus={(e) => setDiscountFocus(true)}\n                                //onBlur={(e) =>  setDiscountFocus(false)}\n                                />\n                                <InputGroupAddon addonType=\"append\">\n                                    <Button onClick={(e) => applyDiscount(e)} className=\"btn-grad\" color=\"primary\" type=\"button\">\n                                        Aplicar\n                          </Button>\n                                </InputGroupAddon>\n                            </InputGroup>\n                        </Form>\n                        <hr className=\"line-info mb-3\" />\n                        <Media className=\"align-items-center\">\n                            <h3 className=\"h6 text-secondary mr-3\">Subtotal</h3>\n                            <Media body className=\"text-right\">\n                                <span className=\"color-mssr\">{data.currency} {estado.subTotal}</span>\n                            </Media>\n                        </Media>\n                        <Media className=\"align-items-center\">\n                            <h3 className=\"h6 text-secondary mr-3\">Descuento</h3>\n                            <Media body className=\"text-right\">\n                                <span className=\"color-mssr\">{estado.descuento} %</span>\n                            </Media>\n                        </Media>\n                        <hr className=\"line-info mb-3\" />\n                        <Media className=\"align-items-center\">\n                            <h3 className=\"h6\">Total</h3>\n                            <Media body className=\"text-right\">\n                                <span className=\"font-weight-semi-bold color-mssr\">{data.currency} {estado.total}</span>\n                            </Media>\n                        </Media>\n                        <hr className=\"line-info mb-3\" />\n                        <h4 className=\"mb-1\">Datos de contacto:</h4>\n                        <Form className=\"form \">\n                            <div className=\"form-group\">\n                                <Input className=\"\"\n                                    placeholder=\"Nombre\"\n                                    type=\"text\"\n                                    onBlur={(e) => this.setDatosContacto('nombre', e)}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <Input type=\"email\"\n                                    onBlur={(e) => this.setDatosContacto('email', e)}\n                                    className=\"form-control\"\n                                    id=\"exampleInputEmail1\"\n                                    aria-describedby=\"emailHelp\"\n                                    placeholder=\"Enter email\" />\n                            </div>\n                            <div className=\"text-danger\">\n                                {this.state.mensajeError}\n                            </div>\n                        </Form>\n\n                        <Button onClick={(e) => this.FinalizarCompra(this.props, e)} className=\"mr-0 btn-grad w-100\" color=\"primary\">\n                            Finalizar compra\n                        </Button>\n\n                    </CardBody>\n                </Card>\n            );\n            let img_cat = estado.categoria.toLowerCase();\n            dataTable.push(\n                <tbody key={i}>\n                    <tr>\n                        <td className=\"td-name fc-val\">\n                            <a className=\"fc-val\">\n                                Categoria {data.product}\n                            </a>\n                            <br />\n                            <small className=\"mr-auto img-container\">{this.state.duracion}ia/s\n                                <img className=\"w-50\"\n                                    alt=\"...\"\n                                    src={`/assets/img/planes/cat_${img_cat}.png`}\n                                />\n                            </small>\n                        </td>\n                        <td className=\"td-number\">\n                            <small>{data.currency}</small>\n                            {estado.precio}\n                        </td>\n                        <td className=\"td-number\">\n                            1\n                        </td>\n                        <td className=\"td-number\">\n                            <small>{data.currency}</small>\n                            {estado.precio}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colSpan=\"2\" />\n                        <td className=\"td-total\">Total</td>\n                        <td className=\"td-price\">\n                            <small>{data.currency}/ </small>\n                            {estado.precio}\n                        </td>\n                    </tr>\n                </tbody>\n            )\n        });\n\n        return (\n            <>\n                <div className=\"checkout-page\" id=\"checkout\" >\n                    <div className=\"section\" key={1}>\n                        <Container>\n                            <Row>\n                                <Col lg=\"8\">\n                                    <Form className=\"js-validate\">\n                                        <h3 className=\"title mb-0\">Resumen de pedido</h3>\n                                        <div className=\"cd-section\" id=\"contentAreas\">\n                                            {/* tables shopping  plan */}\n                                            <div id=\"tables\">\n                                                <Row>\n                                                    <Col md=\"12\">\n                                                        <Card className=\"card-plain mb-0\">\n                                                            <CardBody>\n                                                                <Table className=\"tablesorter table-shopping\" responsive>\n                                                                    <thead>\n                                                                        <tr>\n                                                                            <th>Producto</th>\n                                                                            <th className=\"text-right\">Precio</th>\n                                                                            <th className=\"text-right\">Qty</th>\n                                                                            <th className=\"text-right\">Monto</th>\n                                                                        </tr>\n                                                                    </thead>\n                                                                    {dataTable}\n                                                                </Table>\n                                                            </CardBody>\n                                                        </Card>\n                                                    </Col>\n                                                </Row>\n                                            </div>\n                                            {/* end tables shopping  plan */}\n                                        </div>\n\n                                    </Form>\n                                </Col>\n                                <Col lg=\"4\">\n                                    <h2 className=\"title\">Pagar</h2>\n                                    {/* Inicio boton Componente pago FinalizarCompra */}\n                                    {cpagoFinalizarCompra}\n                                    {/* Fin boton Componente pago FinalizarCompra */}\n                                </Col>\n                            </Row>\n                        </Container>\n                    </div>\n                </div>\n            </>\n        )\n    }\n}\nexport default withRouter(Checkout);\n\n\n"]},"metadata":{},"sourceType":"module"}