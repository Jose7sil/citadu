{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { Component, useEffect, useState } from \"react\";\nimport { withRouter } from 'next/router'; // reactstrap components\n\nimport { Button, Card, CardBody, CardTitle, CardFooter, Container, Row, Col } from \"reactstrap\";\n/*!=======================================================\n  * Nombre: Products\n  * Descripción: Carga la informacion de productos para renderizar en pantalla\n  =========================================================*/\n\nclass CheckoutPayment extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      currency_code: \"\",\n      value: \"\",\n      phoneNumber: 1,\n      session_id: \"\",\n      resumen: {},\n      contact: {}\n    };\n    this.getDetalle = this.getDetalle.bind(this);\n  }\n\n  static getInitialProps({\n    query: {\n      session_id,\n      search\n    }\n  }) {\n    return {\n      session_id: session_id,\n      search: search\n    };\n  }\n  /*!=======================================================\n  * Nombre: componentDidMount\n  * Descripción: Se ejecuta antes del render\n  =========================================================*/\n\n\n  componentDidMount(props) {\n    this.getDetalle();\n  }\n  /*!=======================================================\n   * Nombre: getDetalle\n   * Descripción: \n   =========================================================*/\n\n\n  getDetalle() {\n    this.setState({\n      session_id: this.props.session_id\n    });\n\n    if (this.props.router.query.s) {\n      let encoded_data = this.props.router.query.s.split('Rs')[1];\n      let decoded_data = atob(encoded_data);\n      let resumen = JSON.parse(decoded_data);\n      this.setState({\n        resumen: resumen\n      });\n    }\n\n    const contact = JSON.parse(localStorage.getItem('contact'));\n    const det = JSON.parse(localStorage.getItem('detail'));\n    const detalle = JSON.parse(localStorage.getItem('detalle'));\n\n    if (det.method == \"paypal\" && detalle) {\n      this.setState({\n        id: detalle.id,\n        currency_code: detalle.currency_code,\n        value: detalle.value\n      });\n    }\n\n    const phoneNumber = localStorage.getItem('phoneNumber');\n    this.setState({\n      phoneNumber: phoneNumber,\n      contact: contact\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.resumen !== \"\") {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    const storage = () => {\n      localStorage.clear();\n    };\n\n    let detalle = [];\n    /*********** resumen.status == 'OK' => transbank ********/\n\n    if (this.state.resumen.status == 'OK') {\n      detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-auto\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            className: \"mb-2 w-25 h-25\",\n            alt: \"Logo\",\n            src: \"/assets/img/payment-image/transbank/comprobado.svg\"\n          })\n        }), /*#__PURE__*/_jsxs(\"h4\", {\n          className: \"mb-0\",\n          children: [\"Pedido#\", this.state.resumen.oc]\n        }), /*#__PURE__*/_jsxs(\"h4\", {\n          className: \"mb-0\",\n          children: [\"Gracias \", this.state.resumen.name, \" !\"]\n        }), /*#__PURE__*/_jsxs(Card, {\n          className: \"mb-1 mt-1 card-coin card-plain\",\n          children: [/*#__PURE__*/_jsx(\"h4\", {\n            className: \"mb-0\",\n            children: \"Tu pedido est\\xE1 confirmado\"\n          }), /*#__PURE__*/_jsx(\"h5\", {\n            className: \"\",\n            children: \"Recibir\\xE1s en breve un correo electr\\xF3nico de confirmaci\\xF3n!\"\n          })]\n        }), /*#__PURE__*/_jsx(Card, {\n          className: \"mb-1 mt-2 card-coin card-plain\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-left\",\n            children: /*#__PURE__*/_jsxs(Row, {\n              className: \"m-2\",\n              children: [/*#__PURE__*/_jsxs(Col, {\n                lg: \"7\",\n                md: \"7\",\n                sm: \"7\",\n                children: [/*#__PURE__*/_jsx(\"h4\", {\n                  className: \"mb-0\",\n                  children: \"Informaci\\xF3n del cliente\"\n                }), /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"mb-0\",\n                  children: \"Informaci\\xF3n de contacto\"\n                }), /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"mb-0 text-muted\",\n                  children: this.state.resumen.email\n                })]\n              }), /*#__PURE__*/_jsxs(Col, {\n                lg: \"5\",\n                md: \"5\",\n                sm: \"5\",\n                children: [/*#__PURE__*/_jsx(\"h4\", {\n                  className: \"mb-0\",\n                  children: \"Pago\"\n                }), /*#__PURE__*/_jsxs(\"h4\", {\n                  className: \"mb-0\",\n                  children: [\" \", /*#__PURE__*/_jsx(\"i\", {\n                    className: \"icon-credit-card text-center tim-icons icon-credit-card\"\n                  }), this.state.resumen.amt, \" $ \"]\n                })]\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(CardTitle, {\n          tag: \"h3\"\n        })]\n      }, 1));\n    }\n    /*********** resumen.status == 'NOK' => transbank ********/\n\n\n    if (this.state.resumen.status == 'NOK') {\n      detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-auto\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            className: \"mb-2 w-25 h-25\",\n            alt: \"Logo\",\n            src: \"/assets/img/payment-image/transbank/rechazado.svg\"\n          })\n        }), /*#__PURE__*/_jsxs(\"h4\", {\n          className: \"mb-0\",\n          children: [\"Pedido#\", this.state.resumen.oc]\n        }), /*#__PURE__*/_jsx(\"h4\", {\n          className: \"mb-0\",\n          children: \"Su pago no ha podido realizarse.\"\n        }), /*#__PURE__*/_jsx(\"h5\", {\n          className: \"\",\n          children: this.state.resumen.msg\n        })]\n      }, 2));\n    }\n    /*********** = 'ERROR' => PAYPAL********/\n\n\n    if (this.state.session_id == 'ERROR') {\n      detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-auto\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            className: \"mb-2 w-25 h-25\",\n            alt: \"Logo\",\n            src: \"/assets/img/payment-image/transbank/rechazado.svg\"\n          })\n        }), /*#__PURE__*/_jsx(\"h4\", {\n          className: \"mb-0\",\n          children: \"Su pago no ha podido realizarse.\"\n        }), /*#__PURE__*/_jsx(\"h5\", {\n          className: \"\",\n          children: \"\\\"Ha ocurrido un error al procesar su pago.\\\"\"\n        })]\n      }, 3));\n    }\n    /*********** = 'COMPLETED' => PAYPAL********/\n\n\n    if (this.state.session_id == 'COMPLETED') {\n      detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"mx-auto\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            className: \"mb-2 w-25 h-25\",\n            alt: \"Logo\",\n            src: \"/assets/img/payment-image/transbank/comprobado.svg\"\n          })\n        }), /*#__PURE__*/_jsxs(\"h4\", {\n          className: \"mb-0\",\n          children: [\"Pedido#\", this.state.id]\n        }), /*#__PURE__*/_jsxs(\"h4\", {\n          className: \"mb-0\",\n          children: [\"Gracias \", this.state.contact.nombre, \"!\"]\n        }), /*#__PURE__*/_jsxs(Card, {\n          className: \"mb-1 mt-1 card-coin card-plain\",\n          children: [/*#__PURE__*/_jsx(\"h4\", {\n            className: \"mb-0\",\n            children: \"Tu pedido est\\xE1 confirmado\"\n          }), /*#__PURE__*/_jsx(\"h5\", {\n            className: \"\",\n            children: \"Recibir\\xE1s en breve un correo electr\\xF3nico de confirmaci\\xF3n!\"\n          })]\n        }), /*#__PURE__*/_jsx(Card, {\n          className: \"mb-1 mt-2 card-coin card-plain\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-left\",\n            children: /*#__PURE__*/_jsxs(Row, {\n              className: \"m-2\",\n              children: [/*#__PURE__*/_jsxs(Col, {\n                lg: \"7\",\n                md: \"7\",\n                sm: \"7\",\n                children: [/*#__PURE__*/_jsx(\"h4\", {\n                  className: \"mb-0\",\n                  children: \"Informaci\\xF3n del cliente\"\n                }), /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"mb-0\",\n                  children: \"Informaci\\xF3n de contacto\"\n                }), /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"mb-0 text-muted\",\n                  children: this.state.contact.email\n                })]\n              }), /*#__PURE__*/_jsxs(Col, {\n                lg: \"5\",\n                md: \"5\",\n                sm: \"5\",\n                children: [/*#__PURE__*/_jsx(\"h4\", {\n                  className: \"mb-0\",\n                  children: \"Pago\"\n                }), /*#__PURE__*/_jsxs(\"h4\", {\n                  className: \"mb-0\",\n                  children: [\" \", /*#__PURE__*/_jsx(\"i\", {\n                    className: \"icon-credit-card text-center tim-icons icon-credit-card\"\n                  }), this.state.value, \" $ \"]\n                })]\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(CardTitle, {\n          tag: \"h3\"\n        })]\n      }, 4));\n    }\n\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"invoice-page\",\n        id: \"checkoutPayment\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"section\",\n          children: /*#__PURE__*/_jsx(Container, {\n            children: /*#__PURE__*/_jsx(Row, {\n              children: /*#__PURE__*/_jsx(Col, {\n                className: \"chkp mx-auto ml-auto mr-auto\",\n                lg: \"5\",\n                md: \"6\",\n                sm: \"12\",\n                children: /*#__PURE__*/_jsxs(Card, {\n                  className: \"card-profile profile-bg\",\n                  children: [detalle, /*#__PURE__*/_jsx(CardFooter, {\n                    className: \"d-print-none pt-0\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"follow float-center\",\n                      children: /*#__PURE__*/_jsxs(Button, {\n                        className: \"secondary btn-simple\",\n                        color: \"primary\",\n                        href: `/getmembership/`,\n                        type: \"button\",\n                        size: \"md\",\n                        onClick: () => storage(),\n                        children: [\"Finalizar \", /*#__PURE__*/_jsx(\"i\", {\n                          className: \"tim-icons icon-minimal-right\"\n                        })]\n                      })\n                    })\n                  })]\n                })\n              })\n            })\n          })\n        })\n      })\n    });\n  }\n\n}\n\nexport default withRouter(CheckoutPayment);","map":null,"metadata":{},"sourceType":"module"}