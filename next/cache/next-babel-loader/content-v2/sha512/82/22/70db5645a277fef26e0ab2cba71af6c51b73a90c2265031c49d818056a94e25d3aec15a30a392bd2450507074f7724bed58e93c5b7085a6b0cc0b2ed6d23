{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _classCallCheck from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, useEffect, useState } from \"react\";\nimport { withRouter } from 'next/router'; // reactstrap components\n\nimport { Button, Card, CardBody, CardTitle, CardFooter, Container, Row, Col } from \"reactstrap\";\n/*!=======================================================\n  * Nombre: Products\n  * Descripción: Carga la informacion de productos para renderizar en pantalla\n  =========================================================*/\n\nvar CheckoutPayment = /*#__PURE__*/function (_Component) {\n  _inherits(CheckoutPayment, _Component);\n\n  var _super = _createSuper(CheckoutPayment);\n\n  function CheckoutPayment(props) {\n    var _this;\n\n    _classCallCheck(this, CheckoutPayment);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      id: \"\",\n      currency_code: \"\",\n      value: \"\",\n      phoneNumber: 1,\n      session_id: \"\",\n      resumen: {},\n      contact: {}\n    };\n    _this.getDetalle = _this.getDetalle.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CheckoutPayment, [{\n    key: \"componentDidMount\",\n\n    /*!=======================================================\n    * Nombre: componentDidMount\n    * Descripción: Se ejecuta antes del render\n    =========================================================*/\n    value: function componentDidMount(props) {\n      this.getDetalle();\n    }\n    /*!=======================================================\n     * Nombre: getDetalle\n     * Descripción: \n     =========================================================*/\n\n  }, {\n    key: \"getDetalle\",\n    value: function getDetalle() {\n      this.setState({\n        session_id: this.props.session_id\n      });\n\n      if (this.props.router.query.s) {\n        var encoded_data = this.props.router.query.s.split('Rs')[1];\n        var decoded_data = atob(encoded_data);\n        var resumen = JSON.parse(decoded_data);\n        this.setState({\n          resumen: resumen\n        });\n      }\n\n      var contact = JSON.parse(localStorage.getItem('contact'));\n      var det = JSON.parse(localStorage.getItem('detail'));\n      var detalle = JSON.parse(localStorage.getItem('detalle'));\n\n      if (det.method == \"paypal\" && detalle) {\n        this.setState({\n          id: detalle.id,\n          currency_code: detalle.currency_code,\n          value: detalle.value\n        });\n      }\n\n      var phoneNumber = localStorage.getItem('phoneNumber');\n      this.setState({\n        phoneNumber: phoneNumber,\n        contact: contact\n      });\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (this.state.resumen !== \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var storage = function storage() {\n        localStorage.clear();\n      };\n\n      var detalle = [];\n      /*********** resumen.status == 'OK' => transbank ********/\n\n      if (this.state.resumen.status == 'OK') {\n        detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-auto\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              className: \"mb-2 w-25 h-25\",\n              alt: \"Logo\",\n              src: \"/assets/img/payment-image/transbank/comprobado.svg\"\n            })\n          }), /*#__PURE__*/_jsxs(\"h4\", {\n            className: \"mb-0\",\n            children: [\"Pedido#\", this.state.resumen.oc]\n          }), /*#__PURE__*/_jsxs(\"h4\", {\n            className: \"mb-0\",\n            children: [\"Gracias \", this.state.resumen.name, \" !\"]\n          }), /*#__PURE__*/_jsxs(Card, {\n            className: \"mb-1 mt-1 card-coin card-plain\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              className: \"mb-0\",\n              children: \"Tu pedido est\\xE1 confirmado\"\n            }), /*#__PURE__*/_jsx(\"h5\", {\n              className: \"\",\n              children: \"Recibir\\xE1s en breve un correo electr\\xF3nico de confirmaci\\xF3n!\"\n            })]\n          }), /*#__PURE__*/_jsx(Card, {\n            className: \"mb-1 mt-2 card-coin card-plain\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-left\",\n              children: /*#__PURE__*/_jsxs(Row, {\n                className: \"m-2\",\n                children: [/*#__PURE__*/_jsxs(Col, {\n                  lg: \"7\",\n                  md: \"7\",\n                  sm: \"7\",\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    className: \"mb-0\",\n                    children: \"Informaci\\xF3n del cliente\"\n                  }), /*#__PURE__*/_jsx(\"h5\", {\n                    className: \"mb-0\",\n                    children: \"Informaci\\xF3n de contacto\"\n                  }), /*#__PURE__*/_jsx(\"h5\", {\n                    className: \"mb-0 text-muted\",\n                    children: this.state.resumen.email\n                  })]\n                }), /*#__PURE__*/_jsxs(Col, {\n                  lg: \"5\",\n                  md: \"5\",\n                  sm: \"5\",\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    className: \"mb-0\",\n                    children: \"Pago\"\n                  }), /*#__PURE__*/_jsxs(\"h4\", {\n                    className: \"mb-0\",\n                    children: [\" \", /*#__PURE__*/_jsx(\"i\", {\n                      className: \"icon-credit-card text-center tim-icons icon-credit-card\"\n                    }), this.state.resumen.amt, \" $ \"]\n                  })]\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(CardTitle, {\n            tag: \"h3\"\n          })]\n        }, 1));\n      }\n      /*********** resumen.status == 'NOK' => transbank ********/\n\n\n      if (this.state.resumen.status == 'NOK') {\n        detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-auto\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              className: \"mb-2 w-25 h-25\",\n              alt: \"Logo\",\n              src: \"/assets/img/payment-image/transbank/rechazado.svg\"\n            })\n          }), /*#__PURE__*/_jsxs(\"h4\", {\n            className: \"mb-0\",\n            children: [\"Pedido#\", this.state.resumen.oc]\n          }), /*#__PURE__*/_jsx(\"h4\", {\n            className: \"mb-0\",\n            children: \"Su pago no ha podido realizarse.\"\n          }), /*#__PURE__*/_jsx(\"h5\", {\n            className: \"\",\n            children: this.state.resumen.msg\n          })]\n        }, 2));\n      }\n      /*********** = 'ERROR' => PAYPAL********/\n\n\n      if (this.state.session_id == 'ERROR') {\n        detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-auto\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              className: \"mb-2 w-25 h-25\",\n              alt: \"Logo\",\n              src: \"/assets/img/payment-image/transbank/rechazado.svg\"\n            })\n          }), /*#__PURE__*/_jsx(\"h4\", {\n            className: \"mb-0\",\n            children: \"Su pago no ha podido realizarse.\"\n          }), /*#__PURE__*/_jsx(\"h5\", {\n            className: \"\",\n            children: \"\\\"Ha ocurrido un error al procesar su pago.\\\"\"\n          })]\n        }, 3));\n      }\n      /*********** = 'COMPLETED' => PAYPAL********/\n\n\n      if (this.state.session_id == 'COMPLETED') {\n        detalle.push( /*#__PURE__*/_jsxs(CardBody, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"mx-auto\",\n            children: /*#__PURE__*/_jsx(\"img\", {\n              className: \"mb-2 w-25 h-25\",\n              alt: \"Logo\",\n              src: \"/assets/img/payment-image/transbank/comprobado.svg\"\n            })\n          }), /*#__PURE__*/_jsxs(\"h4\", {\n            className: \"mb-0\",\n            children: [\"Pedido#\", this.state.id]\n          }), /*#__PURE__*/_jsxs(\"h4\", {\n            className: \"mb-0\",\n            children: [\"Gracias \", this.state.contact.nombre, \"!\"]\n          }), /*#__PURE__*/_jsxs(Card, {\n            className: \"mb-1 mt-1 card-coin card-plain\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              className: \"mb-0\",\n              children: \"Tu pedido est\\xE1 confirmado\"\n            }), /*#__PURE__*/_jsx(\"h5\", {\n              className: \"\",\n              children: \"Recibir\\xE1s en breve un correo electr\\xF3nico de confirmaci\\xF3n!\"\n            })]\n          }), /*#__PURE__*/_jsx(Card, {\n            className: \"mb-1 mt-2 card-coin card-plain\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-left\",\n              children: /*#__PURE__*/_jsxs(Row, {\n                className: \"m-2\",\n                children: [/*#__PURE__*/_jsxs(Col, {\n                  lg: \"7\",\n                  md: \"7\",\n                  sm: \"7\",\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    className: \"mb-0\",\n                    children: \"Informaci\\xF3n del cliente\"\n                  }), /*#__PURE__*/_jsx(\"h5\", {\n                    className: \"mb-0\",\n                    children: \"Informaci\\xF3n de contacto\"\n                  }), /*#__PURE__*/_jsx(\"h5\", {\n                    className: \"mb-0 text-muted\",\n                    children: this.state.contact.email\n                  })]\n                }), /*#__PURE__*/_jsxs(Col, {\n                  lg: \"5\",\n                  md: \"5\",\n                  sm: \"5\",\n                  children: [/*#__PURE__*/_jsx(\"h4\", {\n                    className: \"mb-0\",\n                    children: \"Pago\"\n                  }), /*#__PURE__*/_jsxs(\"h4\", {\n                    className: \"mb-0\",\n                    children: [\" \", /*#__PURE__*/_jsx(\"i\", {\n                      className: \"icon-credit-card text-center tim-icons icon-credit-card\"\n                    }), this.state.value, \" $ \"]\n                  })]\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(CardTitle, {\n            tag: \"h3\"\n          })]\n        }, 4));\n      }\n\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"invoice-page\",\n          id: \"checkoutPayment\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"section\",\n            children: /*#__PURE__*/_jsx(Container, {\n              children: /*#__PURE__*/_jsx(Row, {\n                children: /*#__PURE__*/_jsx(Col, {\n                  className: \"chkp mx-auto ml-auto mr-auto\",\n                  lg: \"5\",\n                  md: \"6\",\n                  sm: \"12\",\n                  children: /*#__PURE__*/_jsxs(Card, {\n                    className: \"card-profile profile-bg\",\n                    children: [detalle, /*#__PURE__*/_jsx(CardFooter, {\n                      className: \"d-print-none pt-0\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"follow float-center\",\n                        children: /*#__PURE__*/_jsxs(Button, {\n                          className: \"secondary btn-simple\",\n                          color: \"primary\",\n                          href: \"/getmembership/\",\n                          type: \"button\",\n                          size: \"md\",\n                          onClick: function onClick() {\n                            return storage();\n                          },\n                          children: [\"Finalizar \", /*#__PURE__*/_jsx(\"i\", {\n                            className: \"tim-icons icon-minimal-right\"\n                          })]\n                        })\n                      })\n                    })]\n                  })\n                })\n              })\n            })\n          })\n        })\n      });\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var _ref$query = _ref.query,\n          session_id = _ref$query.session_id,\n          search = _ref$query.search;\n      return {\n        session_id: session_id,\n        search: search\n      };\n    }\n  }]);\n\n  return CheckoutPayment;\n}(Component);\n\nexport default withRouter(CheckoutPayment);","map":null,"metadata":{},"sourceType":"module"}