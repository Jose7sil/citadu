{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : GetMemberShip\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\nimport React, { Component } from \"react\"; //import { withRouter } from \"next/router\";\n\nimport ValidateSubscription from \"../../src/components/memberShip/ValidateSubscription\";\nimport BuySubscription from \"../../src/components/memberShip/BuySubscription\";\nimport environment from '../../src/environments/environments';\nimport * as functions from '../../src/components/shared/functions';\n\nclass MemberShip extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"API_URI_AWS\", environment.apiUrlAws);\n\n    _defineProperty(this, \"xApikey\", environment.xApikey);\n\n    _defineProperty(this, \"componentes\", \"\");\n\n    this.state = {\n      dataphone: [],\n      phoneNumber: \"\"\n    };\n    this.getMemberShip = this.getMemberShip.bind(this);\n  }\n\n  static getInitialProps({\n    query: {\n      phone\n    }\n  }) {\n    return {\n      phone: phone\n    };\n  }\n  /*!=======================================================\n  * Nombre: getMemberShip\n  * Descripción: Verificando si el phone existe en BD para \n    mostrar informacion\n  =========================================================*/\n\n\n  async getMemberShip() {\n    console.log('this.props:', this.props);\n    const body = await fetch(`${this.API_URI_AWS}/integration/mssr/${this.props.phone}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json, text/plain, /*',\n        'x-api-key': this.xApikey\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      const body = {};\n\n      if (data.statusCode === \"200\") {\n        const rs = functions.b64_to_utf8(data.body.rs);\n        body['id'] = data.body.id;\n        body['rs'] = JSON.parse(rs);\n        return body;\n      } else {\n        body['id'] = \"\";\n        return body;\n      }\n    }).catch(err => console.log('#Error#', err)); //Seteando valores en el State\n\n    this.componentes = body.id !== \"\" ? /*#__PURE__*/_jsx(BuySubscription, {\n      dataphone: body\n    }) : /*#__PURE__*/_jsx(ValidateSubscription, {});\n    this.setState({\n      dataphone: body\n    });\n  }\n\n  componentDidMount() {\n    this.getMemberShip();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.componentes !== \"\") {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [\" \", this.componentes, \"  \"]\n    });\n  }\n\n}\n\nexport default MemberShip;","map":null,"metadata":{},"sourceType":"module"}