{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport { Button } from \"reactstrap\";\nimport environment from '../../../environments/environments';\n\nclass TransbankPay extends Component {\n  constructor(props) {\n    super(props); //console.log('props--TransbankPay', props);\n\n    _defineProperty(this, \"API_URI\", environment.apiUrlAws);\n\n    _defineProperty(this, \"pagar\", e => {\n      //console.log('this.state ##PAGAR###::', this.state);\n      //Crear Transaction \n      return fetch(`${this.API_URI}/payments/webpay/transaction`, {\n        method: 'POST',\n        body: JSON.stringify(this.state.transaction),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.statusCode == \"200\") {\n          let url = data.body.url + \"?token_ws=\" + data.body.token;\n          window.location.href = url;\n        }\n      }).catch(err => console.log('#Error#', err));\n    });\n\n    this.state = {\n      categoria: props.state.categoria,\n      duracion: props.state.duracion,\n      total: props.state.total,\n      transaction: {}\n    };\n  }\n  /*!=======================================================\n  * Nombre:  componentDidMount\n  * Descripción: \n  =========================================================*/\n\n\n  componentDidMount(props) {\n    let transaction = global.transaction;\n    this.setState({\n      transaction: transaction\n    });\n  }\n  /*!=======================================================\n  * Nombre: pagar\n  * Descripción: \n  =========================================================*/\n\n\n  render() {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      id: \"TransbankPay\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"card w-70 d-block mx-auto\",\n        children: /*#__PURE__*/_jsx(\"img\", {\n          className: \"img-tranbk\",\n          alt: \"...\",\n          src: \"/assets/img/payment-image/transbank/logos_tarjetas_webpay_down.png\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxs(Button, {\n          onClick: e => this.pagar(e),\n          className: \"mr-0 btn-grad w-100\",\n          color: \"primary\",\n          children: [\"PAGAR (CLP \", this.state.total, \")\"]\n        })\n      })]\n    }, 2);\n  }\n\n}\n\nexport default TransbankPay;","map":null,"metadata":{},"sourceType":"module"}