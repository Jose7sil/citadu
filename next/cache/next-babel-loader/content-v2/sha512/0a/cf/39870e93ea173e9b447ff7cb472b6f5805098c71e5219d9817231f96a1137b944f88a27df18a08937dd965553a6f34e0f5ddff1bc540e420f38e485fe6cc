{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/pages/checkout/[categoria]/[duracion].js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : CheckoutBuy\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\nimport React, { Component } from \"react\"; // nodejs library that concatenates classes\n\nimport classnames from \"classnames\";\nimport * as $ from 'jquery'; //Componente Boton de pago paypal\n\nimport TransbankCheck from \"../../../src/components/checkoutBuy/Transbank/TransbankCheck\";\nimport * as functions from '../../../src/components/shared/functions';\nimport environment from '../../../src/environments/environments'; // reactstrap components\n\nimport { Card, CardBody, Form, Button, Input, InputGroupAddon, InputGroup, Media, Container, Row, Table, Col } from \"reactstrap\";\n/*!=======================================================\n  * Nombre: Shopping\n  * Descripción: Carga la informacion del carrito de compras\n  =========================================================*/\n\nclass Shopping extends Component {\n  constructor(_props) {\n    super(_props);\n\n    _defineProperty(this, \"API_URI\", environment.apiUrlAws);\n\n    _defineProperty(this, \"setDatosContacto\", (d, e) => {\n      switch (d) {\n        case \"nombre\":\n          this.setState({\n            nombre: e.target.value\n          });\n          break;\n\n        case \"email\":\n          this.setState({\n            email: e.target.value\n          });\n          break;\n      }\n    });\n\n    _defineProperty(this, \"FinalizarCompra\", (props, e) => {\n      let emailRegex = /^[-\\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\\.){1,125}[A-Z]{2,63}$/i;\n\n      if (this.state.nombre == \"\" || this.state.email == \"\") {\n        $(\".alert-danger.cn\").css(\"display\", \"block\");\n        this.setState({\n          mensajeError: \"Debe proporcionar un nombre y un email de contacto.\"\n        });\n        return false;\n      }\n\n      if (emailRegex.test(this.state.email) == false) {\n        $(\".alert-danger.cn\").css(\"display\", \"block\");\n        this.setState({\n          mensajeError: \"Email inválido.\"\n        });\n        return false;\n      }\n\n      let contact = {};\n      contact['nombre'] = this.state.nombre;\n      contact['email'] = this.state.email;\n      localStorage.setItem('contact', JSON.stringify(contact));\n      this.setState({\n        mensajeError: \"\"\n      });\n      let cat = this.state.categoria;\n      let duracion = this.state.duracion;\n      let method = this.state.method;\n      console.log('this.state.method: FinalizarCompra ', this.state.method);\n\n      if (this.state.method == \"transbank\") {\n        //Array data Create orden\n        let arr = {};\n        this.state.products.forEach(data => {\n          arr['email'] = this.state.email;\n          arr['nombre'] = this.state.nombre;\n          arr['descuento'] = this.state.descuento;\n          arr['total'] = this.state.total;\n          arr['cupon'] = this.state.cupon;\n          arr['productos'] = [{\n            \"duracion\": this.state.duracion,\n            \"currency\": data.currency,\n            \"categoria\": functions.capitalizarPrimeraLetra(cat),\n            \"cantidad\": 1\n          }];\n        }); //Crear orden de pago transbank\n\n        return fetch(`${this.API_URI}/checkout/order/tbk`, {\n          method: 'POST',\n          body: JSON.stringify(arr),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(function (res) {\n          //console.log('res:', res);\n          return res.json();\n        }).then(function (data) {\n          if (data.statusCode == \"200\") {\n            global.orden = data.body;\n            global.method = method;\n            props.history.replace(`/payment/order/${cat}/${duracion}`);\n          }\n        }).catch(err => console.log('#Error#', err));\n      }\n\n      if (this.state.method == \"paypal\") {\n        console.log('paypal');\n        console.log('cat,duracion:', cat, duracion); //props.history.push(`/payment/${cat}/${duracion}`);\n\n        global.method = method;\n        return props.history.replace(`/payment/order/${cat}/${duracion}/`);\n      }\n    });\n\n    this.state = {\n      products: [],\n      detail: [],\n      dataphone: [],\n      exchanges: \"\",\n      categoria: \"\",\n      duracion: \"\",\n      paymentTabs: 1,\n      discountFocus: undefined,\n      precio: 0,\n      subTotal: 0,\n      descuento: \"0\",\n      total: 0,\n      method: \"\",\n      email: \"\",\n      nombre: \"\",\n      cupon: \"\",\n      mensajeError: \"\"\n    };\n    this.getProductsLS = this.getProductsLS.bind(this, _props);\n  }\n  /*!=======================================================\n  * Nombre: componentDidMount\n  * Descripción: Se ejecuta antes del render\n  =========================================================*/\n\n\n  componentDidMount(props) {\n    this.getProductsLS();\n  }\n  /*!=======================================================\n  * Nombre:  getProductsLS\n  * Descripción: \n  =========================================================*/\n\n\n  getProductsLS(props) {\n    this.setState({\n      categoria: props.match.params.categoria,\n      duracion: props.match.params.duracion\n    });\n    const products = localStorage.getItem('table');\n    const detail = JSON.parse(localStorage.getItem('detail'));\n    this.setState({\n      products: JSON.parse(products),\n      detail: detail,\n      subTotal: detail.amt,\n      //descuento: detail.save,\n      total: detail.amt,\n      precio: detail.amt,\n      method: detail.method\n    });\n  }\n  /*!=======================================================\n    * Nombre: setDatosContacto\n    * Descripción: \n    =========================================================*/\n\n\n  render() {\n    let dataTable = [];\n    let pago = [];\n    let estado = this.state;\n    let detail = {};\n    this.state.products.map((data, i) => {\n      for (let dia in data.price) {\n        if (dia !== this.state.categoria) continue;\n        detail = data.price[dia];\n      }\n\n      const applyDiscount = e => {//console.log('applyDiscount e', e);\n      };\n\n      pago.push( /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardBody, {\n          children: [/*#__PURE__*/_jsxDEV(Form, {\n            className: \"code-validate\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Descuento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n              className: classnames({\n                \"input-group-focus\": this.state.discountFocus\n              }),\n              children: [/*#__PURE__*/_jsxDEV(Input, {\n                className: \"fc-val\",\n                \"aria-label\": \"Discount\",\n                name: \"name\",\n                placeholder: \"codigo descuento\",\n                type: \"text\" // onFocus={(e) => setDiscountFocus(true)}\n                //onBlur={(e) =>  setDiscountFocus(false)}\n\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(InputGroupAddon, {\n                addonType: \"append\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: e => applyDiscount(e),\n                  className: \"btn-grad\",\n                  color: \"primary\",\n                  type: \"button\",\n                  children: \"Aplicar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"line-info mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Media, {\n            className: \"align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"h6 text-secondary mr-3\",\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Media, {\n              body: true,\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"color-mssr\",\n                children: [data.currency, \" \", estado.subTotal]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Media, {\n            className: \"align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"h6 text-secondary mr-3\",\n              children: \"Descuento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Media, {\n              body: true,\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"color-mssr\",\n                children: [estado.descuento, \" %\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"line-info mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Media, {\n            className: \"align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"h6\",\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Media, {\n              body: true,\n              className: \"text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-weight-semi-bold color-mssr\",\n                children: [data.currency, \" \", estado.total]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"line-info mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mb-1\",\n            children: \"Datos de contacto:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            className: \"form \",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: \"\",\n                placeholder: \"Nombre\",\n                type: \"text\",\n                onBlur: e => this.setDatosContacto('nombre', e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"email\",\n                onBlur: e => this.setDatosContacto('email', e),\n                className: \"form-control\",\n                id: \"exampleInputEmail1\",\n                \"aria-describedby\": \"emailHelp\",\n                placeholder: \"Enter email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-danger\",\n              children: this.state.mensajeError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: e => this.FinalizarCompra(this.props, e),\n            className: \"mr-0 btn-grad w-100\",\n            color: \"primary\",\n            children: \"Finalizar compra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this));\n      let img_cat = estado.categoria.toLowerCase();\n      dataTable.push( /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-name fc-val\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"fc-val\",\n              children: [\"Categoria \", data.product]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"mr-auto img-container\",\n              children: [this.state.duracion, \"ia/s\", /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"w-50\",\n                alt: \"...\",\n                src: require(`assets/img/cat_${img_cat}.png`).default\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-number\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: data.currency\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), estado.precio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-number\",\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-number\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: data.currency\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), estado.precio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-total\",\n            children: \"Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-price\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              children: [data.currency, \"/ \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), estado.precio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this));\n    });\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: \"8\",\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                className: \"js-validate\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"title mb-0\",\n                  children: \"Resumen de pedido\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cd-section\",\n                  id: \"contentAreas\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"tables\",\n                    children: /*#__PURE__*/_jsxDEV(Row, {\n                      children: /*#__PURE__*/_jsxDEV(Col, {\n                        md: \"12\",\n                        children: /*#__PURE__*/_jsxDEV(Card, {\n                          className: \"card-plain\",\n                          children: /*#__PURE__*/_jsxDEV(CardBody, {\n                            children: /*#__PURE__*/_jsxDEV(Table, {\n                              className: \"tablesorter table-shopping\",\n                              responsive: true,\n                              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                    children: \"Producto\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 336,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                    className: \"text-right\",\n                                    children: \"Precio\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 337,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                    className: \"text-right\",\n                                    children: \"Qty\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 338,\n                                    columnNumber: 39\n                                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                    className: \"text-right\",\n                                    children: \"Monto\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 339,\n                                    columnNumber: 39\n                                  }, this)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 335,\n                                  columnNumber: 37\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 334,\n                                columnNumber: 35\n                              }, this), dataTable]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 333,\n                              columnNumber: 33\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 332,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 331,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"title\",\n                children: \"Pagar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this), pago]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, 1, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default function Checkout(props) {\n  const [values, setValues] = React.useState(props);\n  const wrapper = React.useRef(null);\n  React.useEffect(() => {\n    document.documentElement.scrollTop = 0;\n    document.scrollingElement.scrollTop = 0;\n    wrapper.current.scrollTop = 0;\n    document.body.classList.add(\"checkout-page\");\n    return function cleanup() {\n      document.body.classList.remove(\"checkout-page\");\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      ref: wrapper,\n      id: \"checkout\",\n      children: /*#__PURE__*/_jsxDEV(Shopping, _objectSpread({}, values), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"sources":["/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/pages/checkout/[categoria]/[duracion].js"],"names":["React","Component","classnames","$","TransbankCheck","functions","environment","Card","CardBody","Form","Button","Input","InputGroupAddon","InputGroup","Media","Container","Row","Table","Col","Shopping","constructor","props","apiUrlAws","d","e","setState","nombre","target","value","email","emailRegex","state","css","mensajeError","test","contact","localStorage","setItem","JSON","stringify","cat","categoria","duracion","method","console","log","arr","products","forEach","data","descuento","total","cupon","currency","capitalizarPrimeraLetra","fetch","API_URI","body","headers","then","res","json","statusCode","global","orden","history","replace","catch","err","detail","dataphone","exchanges","paymentTabs","discountFocus","undefined","precio","subTotal","getProductsLS","bind","componentDidMount","match","params","getItem","parse","amt","render","dataTable","pago","estado","map","i","dia","price","applyDiscount","push","setDatosContacto","FinalizarCompra","img_cat","toLowerCase","product","require","default","Checkout","values","setValues","useState","wrapper","useRef","useEffect","document","documentElement","scrollTop","scrollingElement","current","classList","add","cleanup","remove"],"mappings":"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","sourcesContent":["/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : CheckoutBuy\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\n\nimport React, { Component } from \"react\";\n// nodejs library that concatenates classes\nimport classnames from \"classnames\";\nimport * as $ from 'jquery';\n//Componente Boton de pago paypal\nimport TransbankCheck from \"../../../src/components/checkoutBuy/Transbank/TransbankCheck\";\nimport * as functions from '../../../src/components/shared/functions';\nimport environment from '../../../src/environments/environments';\n// reactstrap components\nimport {\n  Card,\n  CardBody,\n  Form,\n  Button,\n  Input,\n  InputGroupAddon,\n  InputGroup,\n  Media,\n  Container,\n  Row,\n  Table,\n  Col,\n} from \"reactstrap\";\n\n\n/*!=======================================================\n  * Nombre: Shopping\n  * Descripción: Carga la informacion del carrito de compras\n  =========================================================*/\nclass Shopping extends Component {\n  API_URI = environment.apiUrlAws;\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      detail: [],\n      dataphone: [],\n      exchanges: \"\",\n      categoria: \"\",\n      duracion: \"\",\n      paymentTabs: 1,\n      discountFocus: undefined,\n      precio: 0,\n      subTotal: 0,\n      descuento: \"0\",\n      total: 0,\n      method: \"\",\n      email: \"\",\n      nombre: \"\",\n      cupon: \"\",\n      mensajeError: \"\",\n    }\n    this.getProductsLS = this.getProductsLS.bind(this, props);\n  }\n\n  /*!=======================================================\n  * Nombre: componentDidMount\n  * Descripción: Se ejecuta antes del render\n  =========================================================*/\n  componentDidMount(props) {\n    this.getProductsLS();\n  }\n\n  /*!=======================================================\n  * Nombre:  getProductsLS\n  * Descripción: \n  =========================================================*/\n  getProductsLS(props) {\n    this.setState({\n      categoria: props.match.params.categoria,\n      duracion: props.match.params.duracion\n    });\n    const products = localStorage.getItem('table');\n    const detail = JSON.parse(localStorage.getItem('detail'));\n    this.setState({\n      products: JSON.parse(products),\n      detail: detail,\n      subTotal: detail.amt,\n      //descuento: detail.save,\n      total: detail.amt,\n      precio: detail.amt,\n      method: detail.method\n    });\n  }\n\n /*!=======================================================\n   * Nombre: setDatosContacto\n   * Descripción: \n   =========================================================*/\n  setDatosContacto = (d, e) => {\n    switch (d) {\n      case \"nombre\":\n        this.setState({ nombre: e.target.value });\n        break;\n      case \"email\":\n        this.setState({ email: e.target.value });\n        break;\n    }\n  }\n\n /*!=======================================================\n   * Nombre: FinalizarCompra\n   * Descripción: \n   =========================================================*/\n  FinalizarCompra = (props, e) => {\n   \n    let emailRegex = /^[-\\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\\.){1,125}[A-Z]{2,63}$/i;\n    if (this.state.nombre == \"\" || this.state.email == \"\") {\n      $(\".alert-danger.cn\").css(\"display\", \"block\");\n      this.setState({ mensajeError: \"Debe proporcionar un nombre y un email de contacto.\" });\n      return false;\n    }\n    if (emailRegex.test(this.state.email) == false) {\n      $(\".alert-danger.cn\").css(\"display\", \"block\");\n      this.setState({ mensajeError: \"Email inválido.\" });\n      return false;\n    }\n    let contact ={};\n    contact['nombre'] = this.state.nombre;\n    contact['email'] = this.state.email;\n    localStorage.setItem('contact', JSON.stringify(contact));\n\n    this.setState({ mensajeError: \"\" });\n    let cat = this.state.categoria;\n    let duracion = this.state.duracion;\n    let method = this.state.method;\n    console.log('this.state.method: FinalizarCompra ',this.state.method);\n    if (this.state.method == \"transbank\") {\n      //Array data Create orden\n      let arr = {};\n      this.state.products.forEach(data => {\n        arr['email'] = this.state.email;\n        arr['nombre'] = this.state.nombre;\n        arr['descuento'] = this.state.descuento;\n        arr['total'] = this.state.total;\n        arr['cupon'] = this.state.cupon;\n        arr['productos'] = [{\n          \"duracion\": this.state.duracion,\n          \"currency\": data.currency,\n          \"categoria\": functions.capitalizarPrimeraLetra(cat),\n          \"cantidad\": 1\n        }]\n      });\n      //Crear orden de pago transbank\n      return fetch(`${this.API_URI}/checkout/order/tbk`, {\n        method: 'POST',\n        body: JSON.stringify(arr),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        }\n      }).then(function (res) {\n        //console.log('res:', res);\n        return res.json();\n      }).then(function (data) {\n        if (data.statusCode == \"200\") {\n          global.orden = data.body;\n          global.method = method;\n          props.history.replace(`/payment/order/${cat}/${duracion}`);\n        }\n      }).catch(err => console.log('#Error#', err))\n    }\n    if (this.state.method == \"paypal\") {\n      console.log('paypal');\n      console.log('cat,duracion:',cat,duracion);\n      //props.history.push(`/payment/${cat}/${duracion}`);\n      global.method = method;\n      return props.history.replace(`/payment/order/${cat}/${duracion}/`);\n    }\n  }\n\n\n  render() {\n    let dataTable = [];\n    let pago = [];\n    let estado = this.state;\n    let detail = {};\n    this.state.products.map((data, i) => {\n      for (let dia in data.price) {\n        if (dia !== this.state.categoria) continue;\n        detail = data.price[dia];\n      }\n\n      const applyDiscount = (e) => {\n        //console.log('applyDiscount e', e);\n      }\n\n\n      pago.push(\n        <Card key={i}>\n          <CardBody>\n            <Form className=\"code-validate\">\n              <label>Descuento</label>\n              <InputGroup\n                className={classnames({\n                  \"input-group-focus\": this.state.discountFocus,\n                })}\n              >\n                <Input\n                  className=\"fc-val\"\n                  aria-label=\"Discount\"\n                  name=\"name\"\n                  placeholder=\"codigo descuento\"\n                  type=\"text\"\n                // onFocus={(e) => setDiscountFocus(true)}\n                //onBlur={(e) =>  setDiscountFocus(false)}\n                />\n                <InputGroupAddon addonType=\"append\">\n                  <Button onClick={(e) => applyDiscount(e)} className=\"btn-grad\" color=\"primary\" type=\"button\">\n                    Aplicar\n                          </Button>\n                </InputGroupAddon>\n              </InputGroup>\n            </Form>\n            <hr className=\"line-info mb-3\" />\n            <Media className=\"align-items-center\">\n              <h3 className=\"h6 text-secondary mr-3\">Subtotal</h3>\n              <Media body className=\"text-right\">\n                <span className=\"color-mssr\">{data.currency} {estado.subTotal}</span>\n              </Media>\n            </Media>\n            <Media className=\"align-items-center\">\n              <h3 className=\"h6 text-secondary mr-3\">Descuento</h3>\n              <Media body className=\"text-right\">\n                <span className=\"color-mssr\">{estado.descuento} %</span>\n              </Media>\n            </Media>\n            <hr className=\"line-info mb-3\" />\n            <Media className=\"align-items-center\">\n              <h3 className=\"h6\">Total</h3>\n              <Media body className=\"text-right\">\n                <span className=\"font-weight-semi-bold color-mssr\">{data.currency} {estado.total}</span>\n              </Media>\n            </Media>\n            <hr className=\"line-info mb-3\" />\n            <h4 className=\"mb-1\">Datos de contacto:</h4>\n            <Form className=\"form \">\n              <div className=\"form-group\">\n                <Input className=\"\"\n                  placeholder=\"Nombre\"\n                  type=\"text\"\n                  onBlur={(e) => this.setDatosContacto('nombre', e)}\n                />\n              </div>\n              <div className=\"form-group\">\n                <Input type=\"email\"\n                  onBlur={(e) => this.setDatosContacto('email', e)}\n                  className=\"form-control\"\n                  id=\"exampleInputEmail1\"\n                  aria-describedby=\"emailHelp\"\n                  placeholder=\"Enter email\" />\n              </div>\n              <div className=\"text-danger\">\n                {this.state.mensajeError}\n              </div>\n            </Form>\n\n            {/* Inicio componente paypal <TransbankCheck state={this.state}  {...this.props} /> */}\n\n            <Button onClick={(e) => this.FinalizarCompra(this.props, e)} className=\"mr-0 btn-grad w-100\" color=\"primary\">\n              Finalizar compra\n             </Button>\n            {/* Fin componente paypal */}\n          </CardBody>\n        </Card>\n      );\n      let img_cat = estado.categoria.toLowerCase();\n      dataTable.push(\n        <tbody key={i}>\n          <tr>\n            <td className=\"td-name fc-val\">\n         \n              <a className=\"fc-val\">\n                Categoria {data.product}\n              </a>\n              <br />\n              <small className=\"mr-auto img-container\">{this.state.duracion}ia/s \n                                <img className=\"w-50\"\n                                  alt=\"...\"\n                                  src={require(`assets/img/cat_${img_cat}.png`).default}\n                                />\n              </small>\n            </td>\n            <td className=\"td-number\">\n              <small>{data.currency}</small>\n              {estado.precio}\n            </td>\n            <td className=\"td-number\">\n              1\n            </td>\n            <td className=\"td-number\">\n              <small>{data.currency}</small>\n              {estado.precio}\n            </td>\n          </tr>\n          <tr>\n            <td colSpan=\"2\" />\n            <td className=\"td-total\">Total</td>\n            <td className=\"td-price\">\n              <small>{data.currency}/ </small>\n              {estado.precio}\n            </td>\n          </tr>\n        </tbody>\n      );\n    })\n\n    return (\n      <>\n        <div className=\"section\" key={1}>\n          <Container>\n            <Row>\n              <Col lg=\"8\">\n                <Form className=\"js-validate\">\n                  \n                    <h3 className=\"title mb-0\">Resumen de pedido</h3>\n                    <div className=\"cd-section\" id=\"contentAreas\">\n                      {/* tables */}\n                      <div id=\"tables\">\n                        <Row>\n                          <Col md=\"12\">\n                            <Card className=\"card-plain\">\n                              <CardBody>\n                                <Table className=\"tablesorter table-shopping\" responsive>\n                                  <thead>\n                                    <tr>\n                                      <th>Producto</th>\n                                      <th className=\"text-right\">Precio</th>\n                                      <th className=\"text-right\">Qty</th>\n                                      <th className=\"text-right\">Monto</th>\n                                    </tr>\n                                  </thead>\n                                  {dataTable}\n                                </Table>\n                              </CardBody>\n                            </Card>\n                          </Col>\n                        </Row>\n                      </div>\n                      {/* end tables */}\n                    </div>\n                \n                </Form>\n              </Col>\n              <Col lg=\"4\">\n                <h2 className=\"title\">Pagar</h2>\n                {/* Inicio boton pago */}\n                {pago}\n                {/* Fin boton pago */}\n              </Col>\n            </Row>\n          </Container>\n        </div>\n      </>\n    )\n  }\n}\n\n\nexport default function Checkout(props) {\n  const [values, setValues] = React.useState(props);\n  const wrapper = React.useRef(null);\n  React.useEffect(() => {\n    document.documentElement.scrollTop = 0;\n    document.scrollingElement.scrollTop = 0;\n    wrapper.current.scrollTop = 0;\n    document.body.classList.add(\"checkout-page\");\n    return function cleanup() {\n      document.body.classList.remove(\"checkout-page\");\n    };\n  }, []);\n\n  return (\n    <>\n      <div className=\"wrapper\" ref={wrapper} id=\"checkout\">\n        <Shopping {...values} />\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}