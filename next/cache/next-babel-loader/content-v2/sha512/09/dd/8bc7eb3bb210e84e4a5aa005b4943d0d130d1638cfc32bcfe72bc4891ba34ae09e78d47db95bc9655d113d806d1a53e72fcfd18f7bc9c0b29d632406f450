{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : CheckoutBuy\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\nimport React, { Component } from \"react\"; //Componente Boton de pago paypal\n\nimport Paypal from \"../../../../src/components/checkoutBuy/Paypal/paypal\";\nimport TransbankPay from \"../../../../src/components/checkoutBuy/Transbank/TransbankPay\"; // reactstrap components\n\nimport { Card, CardBody, Form, Container, Row, Table, Col } from \"reactstrap\";\nimport { withRouter } from 'next/router';\n/*!=======================================================\n  * Nombre: Shopping\n  * Descripción: Carga la informacion del carrito de compras\n  =========================================================*/\n\nclass Shopping extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      detail: [],\n      dataphone: [],\n      exchanges: \"\",\n      categoria: \"\",\n      duracion: \"\",\n      paymentTabs: 1,\n      discountFocus: undefined,\n      precio: 0,\n      subTotal: 0,\n      descuento: \"0%\",\n      total: 0,\n      method: \"\"\n    };\n    this.getProductsLS = this.getProductsLS.bind(this, props);\n  }\n\n  static getInitialProps({\n    query: {\n      categoria,\n      duracion\n    }\n  }) {\n    return {\n      categoria: categoria,\n      duracion: duracion\n    };\n  }\n  /*!=======================================================\n  * Nombre: componentDidMount\n  * Descripción: Se ejecuta antes del render\n  =========================================================*/\n\n\n  componentDidMount(props) {\n    this.getProductsLS();\n  }\n  /*!=======================================================\n  * Nombre:  getProductsLS\n  * Descripción: \n  =========================================================*/\n\n\n  getProductsLS(props) {\n    let cat = props.categoria;\n    let duracion = props.duracion;\n\n    if (global.orden && global.method == \"transbank\") {\n      let orden = global.orden;\n      let transaction = {};\n      transaction['r_cod'] = orden.r_cod;\n      transaction['r_dte'] = orden.r_dte;\n      transaction['r_trx'] = orden.r_trx;\n      global.transaction = transaction;\n    }\n\n    if (!global.orden && !global.method) {\n      this.props.router.push({\n        pathname: `/checkout/${cat}/${duracion}`\n      });\n    }\n\n    this.setState({\n      categoria: cat,\n      duracion: duracion\n    });\n    const products = localStorage.getItem('table');\n    const detail = JSON.parse(localStorage.getItem('detail'));\n    this.setState({\n      products: JSON.parse(products),\n      detail: detail,\n      subTotal: detail.amt,\n      total: detail.amt,\n      precio: detail.amt,\n      method: detail.method\n    });\n  }\n\n  render() {\n    let dataTable = [];\n    let pago = [];\n    let estado = this.state;\n    let detail = {};\n    const method = [];\n\n    if (this.state.method == \"transbank\") {\n      method.push( /*#__PURE__*/_jsx(TransbankPay, _objectSpread({\n        state: this.state\n      }, this.props)));\n    } else {\n      method.push( /*#__PURE__*/_jsx(Paypal, _objectSpread({\n        state: this.state\n      }, this.props)));\n    }\n\n    this.state.products.forEach(data => {\n      for (let dia in data.price) {\n        if (dia !== this.state.categoria) continue;\n        detail = data.price[dia];\n      }\n\n      const applyDiscount = e => {//console.log('applyDiscount e', e);\n      };\n\n      pago.push( /*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsxs(CardBody, {\n          children: [/*#__PURE__*/_jsx(\"hr\", {\n            className: \"line-warning mb-3\"\n          }), method]\n        })\n      }));\n      let img_cat = estado.categoria.toLowerCase();\n      dataTable.push( /*#__PURE__*/_jsxs(\"tbody\", {\n        children: [/*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsxs(\"td\", {\n            className: \"td-name fc-val\",\n            children: [/*#__PURE__*/_jsxs(\"a\", {\n              className: \"fc-val\",\n              children: [\"Categoria \", data.product]\n            }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"small\", {\n              className: \"mr-auto img-container\",\n              children: [this.state.duracion, \"ia/s\", /*#__PURE__*/_jsx(\"img\", {\n                className: \"w-50\",\n                alt: \"...\",\n                src: `/assets/img/planes/cat_${img_cat}.png`\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"td\", {\n            className: \"td-number\",\n            children: [/*#__PURE__*/_jsx(\"small\", {\n              children: data.currency\n            }), estado.precio]\n          }), /*#__PURE__*/_jsx(\"td\", {\n            className: \"td-number\",\n            children: \"1\"\n          }), /*#__PURE__*/_jsxs(\"td\", {\n            className: \"td-number\",\n            children: [/*#__PURE__*/_jsx(\"small\", {\n              children: data.currency\n            }), estado.precio]\n          })]\n        }), /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"td\", {\n            colSpan: \"2\"\n          }), /*#__PURE__*/_jsx(\"td\", {\n            className: \"td-total\",\n            children: \"Total\"\n          }), /*#__PURE__*/_jsxs(\"td\", {\n            className: \"td-price\",\n            children: [/*#__PURE__*/_jsxs(\"small\", {\n              children: [data.currency, \"/ \"]\n            }), estado.precio]\n          })]\n        })]\n      }));\n    });\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"section checkout-page\",\n        children: /*#__PURE__*/_jsx(Container, {\n          children: /*#__PURE__*/_jsxs(Row, {\n            children: [/*#__PURE__*/_jsx(Col, {\n              lg: \"8\",\n              children: /*#__PURE__*/_jsxs(Form, {\n                className: \"js-validate\",\n                children: [/*#__PURE__*/_jsx(\"h3\", {\n                  className: \"title mb-0\",\n                  children: \"Resumen de compra\"\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"cd-section\",\n                  id: \"contentAreas\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    id: \"tables\",\n                    children: /*#__PURE__*/_jsx(Row, {\n                      children: /*#__PURE__*/_jsx(Col, {\n                        md: \"12\",\n                        children: /*#__PURE__*/_jsx(Card, {\n                          className: \"card-plain\",\n                          children: /*#__PURE__*/_jsx(CardBody, {\n                            children: /*#__PURE__*/_jsxs(Table, {\n                              className: \"tablesorter table-shopping\",\n                              responsive: true,\n                              children: [/*#__PURE__*/_jsx(\"thead\", {\n                                children: /*#__PURE__*/_jsxs(\"tr\", {\n                                  children: [/*#__PURE__*/_jsx(\"th\", {\n                                    children: \"Producto\"\n                                  }), /*#__PURE__*/_jsx(\"th\", {\n                                    className: \"text-right\",\n                                    children: \"Precio\"\n                                  }), /*#__PURE__*/_jsx(\"th\", {\n                                    className: \"text-right\",\n                                    children: \"Qty\"\n                                  }), /*#__PURE__*/_jsx(\"th\", {\n                                    className: \"text-right\",\n                                    children: \"Monto\"\n                                  })]\n                                })\n                              }), dataTable]\n                            })\n                          })\n                        })\n                      })\n                    })\n                  })\n                })]\n              })\n            }), /*#__PURE__*/_jsxs(Col, {\n              lg: \"4\",\n              children: [/*#__PURE__*/_jsx(\"h2\", {\n                className: \"title\",\n                children: \"Medio de Pago\"\n              }), pago]\n            })]\n          })\n        })\n      })\n    });\n  }\n\n}\n\nexport default withRouter(Shopping);","map":null,"metadata":{},"sourceType":"module"}