{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/pages/getmembership/[phone].js\";\n\n/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : GetMemberShip\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\nimport React, { Component } from \"react\";\nimport { withRouter } from 'next/router';\nimport ValidateSubscription from \"../../src/components/memberShip/ValidateSubscription\";\nimport BuySubscription from \"../../src/components/memberShip/BuySubscription\";\nimport environment from '../../src/environments/environments';\nimport * as functions from '../../src/components/shared/functions';\n\nclass MemberShip extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"API_URI_AWS\", environment.apiUrlAws);\n\n    _defineProperty(this, \"xApikey\", environment.xApikey);\n\n    this.state = {\n      dataphone: [],\n      phoneNumber: \"\"\n    };\n    this.getMemberShip = this.getMemberShip.bind(this, props);\n  }\n  /*!=======================================================\n  * Nombre: componentDidMount\n  * Descripción: Se ejecuta antes del render\n  =========================================================*/\n\n\n  componentDidMount() {\n    this.getMemberShip();\n  }\n\n  async componentDidUpdate() {\n    if (prevState.count !== this.state.count) {\n      console.log('this.state1:', this.state);\n      console.log('this.props.router.query:', this.props.router.query);\n      const {\n        phone\n      } = this.props.router.query;\n      const body = await fetch(`${this.API_URI_AWS}/integration/mssr/${phone}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json, text/plain, */*',\n          'x-api-key': this.xApikey\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        const body = {};\n\n        if (data.statusCode === \"200\") {\n          const rs = functions.b64_to_utf8(data.body.rs);\n          body['id'] = data.body.id;\n          body['rs'] = JSON.parse(rs);\n          return body;\n        } else {\n          body['id'] = \"\";\n          return body;\n        }\n      }).catch(err => console.log('#Error#', err)); //Seteando valores en el State\n\n      this.setState({\n        dataphone: body\n      });\n    }\n  }\n  /*!=======================================================\n  * Nombre: getMemberShip\n  * Descripción: Verificando si el phone existe en BD para \n    mostrar informacion\n  =========================================================*/\n\n\n  async getMemberShip(props) {// Obtenemos el parametro en esta variable\n    //const phone = props.match.params.phone; //ANTES\n    //console.log('props.router.query:', props.router.query);\n    //const phone  = props.router.query.phone //AHORA\n    //console.log('this.state', this.state);\n  }\n\n  render() {\n    console.log('this.state2:', this.state);\n\n    if (this.state.dataphone.id) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(BuySubscription, {\n          dataphone: this.state.dataphone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(ValidateSubscription, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, void 0, false);\n    }\n  }\n\n}\n\nexport default _c = withRouter(MemberShip);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/rational/u00/repositorios/REACT-REPO/MSSR-NEXT-JS/pages/getmembership/[phone].js"],"names":["React","Component","withRouter","ValidateSubscription","BuySubscription","environment","functions","MemberShip","constructor","props","apiUrlAws","xApikey","state","dataphone","phoneNumber","getMemberShip","bind","componentDidMount","componentDidUpdate","prevState","count","console","log","router","query","phone","body","fetch","API_URI_AWS","method","headers","then","res","json","data","statusCode","rs","b64_to_utf8","id","JSON","parse","catch","err","setState","render"],"mappings":"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","sourcesContent":["/*!\n=========================================================\n* Proyecto: mssr-pays-integration\n* Componente : GetMemberShip\n* Autor : José silva (RationalIT)\n* Versión : 1.0.0\n=========================================================\n*/\nimport React, { Component } from \"react\";\nimport { withRouter } from 'next/router'\nimport ValidateSubscription from \"../../src/components/memberShip/ValidateSubscription\";\n\nimport BuySubscription from \"../../src/components/memberShip/BuySubscription\"\nimport environment from '../../src/environments/environments';\nimport * as functions from '../../src/components/shared/functions';\n\n\n\nclass MemberShip extends Component {\n  API_URI_AWS = environment.apiUrlAws;\n  xApikey = environment.xApikey;\n  constructor(props) {\n    super(props);\n    this.state = {\n      dataphone: [],\n      phoneNumber: \"\"\n    };\n    \n    this.getMemberShip = this.getMemberShip.bind(this, props);\n \n\n    \n  }\n\n\n\n\n  /*!=======================================================\n  * Nombre: componentDidMount\n  * Descripción: Se ejecuta antes del render\n  =========================================================*/\n  componentDidMount() {\n    this.getMemberShip();\n  }\n\n\n  async componentDidUpdate() {\n    if (prevState.count !== this.state.count) {\n      console.log('this.state1:', this.state);\n      console.log('this.props.router.query:', this.props.router.query);\n      const { phone } = this.props.router.query;\n      const body = await fetch(`${this.API_URI_AWS}/integration/mssr/${phone}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json, text/plain, */*',\n          'x-api-key': this.xApikey\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        const body = {};\n        if (data.statusCode === \"200\") {\n          const rs = functions.b64_to_utf8(data.body.rs);\n          body['id'] = data.body.id;\n          body['rs'] = JSON.parse(rs);\n  \n          return body;\n        } else {\n          body['id'] = \"\";\n          return body;\n        }\n      }).catch(err => console.log('#Error#', err))\n      //Seteando valores en el State\n      this.setState({\n        dataphone: body,\n      });\n    }\n\n  \n  }\n  /*!=======================================================\n  * Nombre: getMemberShip\n  * Descripción: Verificando si el phone existe en BD para \n    mostrar informacion\n  =========================================================*/\n  async getMemberShip(props) {\n    // Obtenemos el parametro en esta variable\n    //const phone = props.match.params.phone; //ANTES\n    //console.log('props.router.query:', props.router.query);\n\n    //const phone  = props.router.query.phone //AHORA\n  \n    //console.log('this.state', this.state);\n  }\n\n  render() {\n  \n\n\n    console.log('this.state2:', this.state);\n\n\n    if (this.state.dataphone.id) {\n      return (\n        <>\n          <BuySubscription dataphone={this.state.dataphone} />\n        </>\n      )\n    } else {\n      return (\n        <>\n          <ValidateSubscription />\n        </>\n      )\n    }\n\n\n  }\n}\n\nexport default withRouter(MemberShip);\n"]},"metadata":{},"sourceType":"module"}